{"version":3,"sources":["webpack:///node_modules/@capacitor/camera/dist/esm/web.js"],"names":["CameraWeb","options","Promise","resolve","reject","webUseInput","source","CameraSource","fileInputExperience","actionSheet","document","querySelector","createElement","body","appendChild","header","promptLabelHeader","cancelable","title","promptLabelPhoto","promptLabelPicture","addEventListener","e","selection","detail","cameraExperience","_options","multipleFileInputExperience","customElements","get","cameraModal","facingMode","direction","CameraDirection","componentOnReady","photo","CapacitorException","Error","_getCameraPhoto","dismiss","removeChild","present","console","error","input","cleanup","_a","parentNode","id","type","hidden","_e","file","files","format","resultType","reader","FileReader","dataUrl","result","b64","split","base64String","readAsDataURL","webPath","URL","createObjectURL","accept","capture","removeAttribute","click","multiple","photos","i","length","push","saved","onloadend","r","onerror","navigator","permissions","unavailable","window","query","name","permission","camera","state","unimplemented","WebPlugin","Camera"],"mappings":"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","file":"node_modules_capacitor_camera_dist_esm_web_js-es5.js","sourcesContent":["import { WebPlugin, CapacitorException } from '@capacitor/core';\nimport { CameraSource, CameraDirection } from './definitions';\nexport class CameraWeb extends WebPlugin {\n    async getPhoto(options) {\n        // eslint-disable-next-line no-async-promise-executor\n        return new Promise(async (resolve, reject) => {\n            if (options.webUseInput || options.source === CameraSource.Photos) {\n                this.fileInputExperience(options, resolve);\n            }\n            else if (options.source === CameraSource.Prompt) {\n                let actionSheet = document.querySelector('pwa-action-sheet');\n                if (!actionSheet) {\n                    actionSheet = document.createElement('pwa-action-sheet');\n                    document.body.appendChild(actionSheet);\n                }\n                actionSheet.header = options.promptLabelHeader || 'Photo';\n                actionSheet.cancelable = false;\n                actionSheet.options = [\n                    { title: options.promptLabelPhoto || 'From Photos' },\n                    { title: options.promptLabelPicture || 'Take Picture' },\n                ];\n                actionSheet.addEventListener('onSelection', async (e) => {\n                    const selection = e.detail;\n                    if (selection === 0) {\n                        this.fileInputExperience(options, resolve);\n                    }\n                    else {\n                        this.cameraExperience(options, resolve, reject);\n                    }\n                });\n            }\n            else {\n                this.cameraExperience(options, resolve, reject);\n            }\n        });\n    }\n    async pickImages(_options) {\n        // eslint-disable-next-line no-async-promise-executor\n        return new Promise(async (resolve) => {\n            this.multipleFileInputExperience(resolve);\n        });\n    }\n    async cameraExperience(options, resolve, reject) {\n        if (customElements.get('pwa-camera-modal')) {\n            const cameraModal = document.createElement('pwa-camera-modal');\n            cameraModal.facingMode =\n                options.direction === CameraDirection.Front ? 'user' : 'environment';\n            document.body.appendChild(cameraModal);\n            try {\n                await cameraModal.componentOnReady();\n                cameraModal.addEventListener('onPhoto', async (e) => {\n                    const photo = e.detail;\n                    if (photo === null) {\n                        reject(new CapacitorException('User cancelled photos app'));\n                    }\n                    else if (photo instanceof Error) {\n                        reject(photo);\n                    }\n                    else {\n                        resolve(await this._getCameraPhoto(photo, options));\n                    }\n                    cameraModal.dismiss();\n                    document.body.removeChild(cameraModal);\n                });\n                cameraModal.present();\n            }\n            catch (e) {\n                this.fileInputExperience(options, resolve);\n            }\n        }\n        else {\n            console.error(`Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/pwa-elements.`);\n            this.fileInputExperience(options, resolve);\n        }\n    }\n    fileInputExperience(options, resolve) {\n        let input = document.querySelector('#_capacitor-camera-input');\n        const cleanup = () => {\n            var _a;\n            (_a = input.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(input);\n        };\n        if (!input) {\n            input = document.createElement('input');\n            input.id = '_capacitor-camera-input';\n            input.type = 'file';\n            input.hidden = true;\n            document.body.appendChild(input);\n            input.addEventListener('change', (_e) => {\n                const file = input.files[0];\n                let format = 'jpeg';\n                if (file.type === 'image/png') {\n                    format = 'png';\n                }\n                else if (file.type === 'image/gif') {\n                    format = 'gif';\n                }\n                if (options.resultType === 'dataUrl' ||\n                    options.resultType === 'base64') {\n                    const reader = new FileReader();\n                    reader.addEventListener('load', () => {\n                        if (options.resultType === 'dataUrl') {\n                            resolve({\n                                dataUrl: reader.result,\n                                format,\n                            });\n                        }\n                        else if (options.resultType === 'base64') {\n                            const b64 = reader.result.split(',')[1];\n                            resolve({\n                                base64String: b64,\n                                format,\n                            });\n                        }\n                        cleanup();\n                    });\n                    reader.readAsDataURL(file);\n                }\n                else {\n                    resolve({\n                        webPath: URL.createObjectURL(file),\n                        format: format,\n                    });\n                    cleanup();\n                }\n            });\n        }\n        input.accept = 'image/*';\n        input.capture = true;\n        if (options.source === CameraSource.Photos ||\n            options.source === CameraSource.Prompt) {\n            input.removeAttribute('capture');\n        }\n        else if (options.direction === CameraDirection.Front) {\n            input.capture = 'user';\n        }\n        else if (options.direction === CameraDirection.Rear) {\n            input.capture = 'environment';\n        }\n        input.click();\n    }\n    multipleFileInputExperience(resolve) {\n        let input = document.querySelector('#_capacitor-camera-input-multiple');\n        const cleanup = () => {\n            var _a;\n            (_a = input.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(input);\n        };\n        if (!input) {\n            input = document.createElement('input');\n            input.id = '_capacitor-camera-input-multiple';\n            input.type = 'file';\n            input.hidden = true;\n            input.multiple = true;\n            document.body.appendChild(input);\n            input.addEventListener('change', (_e) => {\n                const photos = [];\n                // eslint-disable-next-line @typescript-eslint/prefer-for-of\n                for (let i = 0; i < input.files.length; i++) {\n                    const file = input.files[i];\n                    let format = 'jpeg';\n                    if (file.type === 'image/png') {\n                        format = 'png';\n                    }\n                    else if (file.type === 'image/gif') {\n                        format = 'gif';\n                    }\n                    photos.push({\n                        webPath: URL.createObjectURL(file),\n                        format: format,\n                    });\n                }\n                resolve({ photos });\n                cleanup();\n            });\n        }\n        input.accept = 'image/*';\n        input.click();\n    }\n    _getCameraPhoto(photo, options) {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            const format = photo.type.split('/')[1];\n            if (options.resultType === 'uri') {\n                resolve({\n                    webPath: URL.createObjectURL(photo),\n                    format: format,\n                    saved: false,\n                });\n            }\n            else {\n                reader.readAsDataURL(photo);\n                reader.onloadend = () => {\n                    const r = reader.result;\n                    if (options.resultType === 'dataUrl') {\n                        resolve({\n                            dataUrl: r,\n                            format: format,\n                            saved: false,\n                        });\n                    }\n                    else {\n                        resolve({\n                            base64String: r.split(',')[1],\n                            format: format,\n                            saved: false,\n                        });\n                    }\n                };\n                reader.onerror = e => {\n                    reject(e);\n                };\n            }\n        });\n    }\n    async checkPermissions() {\n        if (typeof navigator === 'undefined' || !navigator.permissions) {\n            throw this.unavailable('Permissions API not available in this browser');\n        }\n        try {\n            // https://developer.mozilla.org/en-US/docs/Web/API/Permissions/query\n            // the specific permissions that are supported varies among browsers that implement the\n            // permissions API, so we need a try/catch in case 'camera' is invalid\n            const permission = await window.navigator.permissions.query({\n                name: 'camera',\n            });\n            return {\n                camera: permission.state,\n                photos: 'granted',\n            };\n        }\n        catch (_a) {\n            throw this.unavailable('Camera permissions are not available in this browser');\n        }\n    }\n    async requestPermissions() {\n        throw this.unimplemented('Not implemented on web.');\n    }\n}\nconst Camera = new CameraWeb();\nexport { Camera };\n//# sourceMappingURL=web.js.map"]}